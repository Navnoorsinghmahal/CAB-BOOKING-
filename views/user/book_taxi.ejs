<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <%-include('../pages/headerFiles')%>

</head>
<style>
    .abc {
        width: 414px;
        height: 350px;
    }
    input[type="date"]:invalid {
        color: grey;
    }
</style>
<body onload="bookDrivers()">

<%-include('../pages/header_user')%>

<div class="slider-section">
    <div class="main-slider-2">
        <div class="swiper-wrapper">
            <div class="swiper-slide">
                <div class="slider-img"><img src="assets/img/slider-bg.jpg" alt="img" class="kenburns" style="animation-duration: 12000ms; "></div>
                <div class="slider-content-wrap d-flex align-items-center text-left">
                    <div class="container">
                        <div class="slider-content text-center pb-60">
                            <div class="slider-caption medium">
                                <div class="inner-layer">
                                    <div data-animation="fade-in-bottom" data-delay="0.3s">Travel securely with us!</div>
                                </div>
                            </div>
                            <div class="slider-caption big">
                                <div class="inner-layer">
                                    <div data-animation="fade-in-bottom" data-delay="0.5s">Book your taxi from <br>anywhare today!</div>
                                </div>
                            </div>
                            <div class="slider-caption small">
                                <div class="inner-layer">
                                    <div data-animation="fade-in-bottom" data-delay="0.7s" data-duration="1s">Everything your taxi business needs is already here! <br>Ridek made for taxi service companies!</div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="slider-img"><img src="assets/img/slider-bg.jpg" alt="img" class="kenburns" style="animation-duration: 12000ms; "></div>
                <div class="slider-content-wrap d-flex align-items-center text-left">
                    <div class="container">
                        <div class="slider-content text-center pb-60">
                            <div class="slider-caption medium">
                                <div class="inner-layer">
                                    <div data-animation="fade-in-bottom" data-delay="0.3s">Travel securely with us!</div>
                                </div>
                            </div>
                            <div class="slider-caption big">
                                <div class="inner-layer">
                                    <div data-animation="fade-in-bottom" data-delay="0.5s">Book your taxi from <br>anywhare today!</div>
                                </div>
                            </div>
                            <div class="slider-caption small">
                                <div class="inner-layer">
                                    <div data-animation="fade-in-bottom" data-delay="0.7s" data-duration="1s">Everything your taxi business needs is already here! <br>Ridek made for taxi service companies!</div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<section class="booking-section-2 padding-20">
    <div class="container">
        <div class="row booking-form-2 g-0">
            <div class="col-md-4 d-none d-lg-block">
                <div class="booking-car-wrap">
                    <div class="booking-car wow fade-in-left" data-wow-delay="200ms"></div>
                </div>
            </div>
            <div class="col-lg-8">
                <div class="section-heading mb-30">
                    <h4><span></span>Online Booking</h4>
                    <h2 class="white">Select Filters</h2>
                </div>
                <form  id="filterForm">
                    <div class="booking-form">

                        <div class="form-field">
                            <i class="las la-tags"></i>
                            <select name="carTypeSelect" id="carTypeSelect" class="niceSelect" required>
                                <option value = "">Select</option>
                                <option value="Sedan">Sedan</option>
                                <option value="SUV">SUV</option>
                                <option value="Hatchback">Hatchback</option>
                                <option value="Convertible">Convertible</option>
                                <option value="Coupe">Coupe</option>
                                <option value="Wagon">Wagon</option>
                                <option value="Van">Van</option>
                            </select>
                        </div>


                        <div class="form-field">
                            <i class="las la-calendar"></i>
                            <input type="date" id="startDate" name="startDate"  placeholder="Select Start Date" required>
                        </div>
                        <div class="form-field">
                            <i class="las la-calendar"></i>
                            <input type="date" id="endDate" name="endDate"  placeholder="Select End Date" required>
                        </div>
                        <div class="form-field">

                            <button onclick="submitFilter()"  type="button" class="default-btn">Search</button>
                        </div>
                        <div class="form-field">
                            <button class="default-btn" onclick="Reset()">Reset Filters</button>
                        </div>
                    </div>
                    <div id="form-messages" class="alert" role="alert"></div>
                </form><!-- Booking Form -->
            </div>
        </div>
    </div>
</section>

<div class="row mt-4" id="dataResult"></div>

<div class="modal" id="availabilityModal" tabindex="-1" role="dialog" aria-labelledby="infoModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="infoModalLabel">Check Availability</h5>
                <button type="button" class="close" onclick="Reset2()" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" id="modalContent">
                <form id = "availabilityForm">
                <div class="booking-form">
                    <input type="hidden" id="driverId" name="driverId">

                    <div class="form-field">
                        <i class="las la-calendar"></i>
                        <input type="date" id="availabilityStartDate" name="availabilityStartDate"  placeholder="From" required>
                    </div>
                    <div class="form-field">
                        <i class="las la-clock"></i>
                        <input type="date" id="availabilityEndDate" name="availabilityEndDate" placeholder="To" required>
                    </div>
                    <div>  </div>
                    <div class="form-field">

                        <button onclick="checkAvailability()"  type="button" class="default-btn">Check Availability</button>
                    </div>
                    <div class="form-field">
                        <button onclick="bookTaxi2()" class="btn-info" id="bookTaxi_button" type="button">Book Taxi</button>
                    </div>
                </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="Reset2()" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="bookingModal" tabindex="-1" role="dialog" aria-labelledby="bookingModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="bookingModalLabel">Booking Information</h5>
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" id="modalContent">
                <form id="bookingForm">
                    <div class="form-group">
                        <label for="bookingStartDate">Start Date:</label>
                        <input type="date" class="form-control" id="bookingStartDate" readonly>
                    </div>
                    <div class="form-group">
                        <label for="bookingEndDate">End Date:</label>
                        <input type="date" class="form-control" id="bookingEndDate" readonly>
                    </div>
                    <div class="form-group">
                        <label for="userEmail">Email:</label>
                        <input type="email" class="form-control" id="userEmail" readonly>
                    </div>
                    <div class="form-group">
                        <label for="userName">Name:</label>
                        <input type="text" class="form-control" id="userName" readonly>
                    </div>
                    <div class="form-group">
                        <label for="mobile">Phone No:</label>
                        <input type="text" class="form-control" id="mobile" >
                    </div>
                    <div class="form-group">
                        <label>Booking Options:</label><br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="bookingOption" id="withDriver" value="withDriver">
                            <label class="form-check-label" for="withDriver">With Driver</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="bookingOption" id="withoutDriver" value="withoutDriver">
                            <label class="form-check-label" for="withoutDriver">Without Driver</label>
                        </div>
                    </div>
<!--                    <div id="priceDetails" style="display: none" class="mt-3">-->
<!--                        <p id="withDriverPrice">Rent with Driver: $</p>-->
<!--                        <p id="withoutDriverPrice">Rent without Driver: $</p>-->
<!--                    </div>-->
                    <div class="form-group" style="display: none" >
                        <label for="withDriverPrice">withDriverPrice:</label>
                        <input type="text" class="form-control" id="withDriverPrice" readonly>
                    </div>
                    <div class="form-group" style="display: none">
                        <label for="withoutDriverPrice">withDriverPrice:</label>
                        <input type="text" class="form-control" id="withoutDriverPrice" readonly>
                    </div>
                    <div class="form-group" style="display: none">
                        <label for="carId">carId:</label>
                        <input type="text" class="form-control" id="carId" readonly>
                    </div>
                    <div class="form-group" style="display: none">
                        <label for="carName">carId:</label>
                        <input type="text" class="form-control" id="carName" readonly>
                    </div>

                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" onclick="confirmBooking()">Confirm Booking</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<section class="testimonial-section bd-bottom bg-grey">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <div class="section-heading mb-10">
                    <h4><span></span>Clients Testimonial</h4>
                    <h2>Ridek Passenger Reviews...</h2>
                    <p>We successfully cope with tasks of varying complexity, provide long-term guarantees and regularly master technologies.</p>
                </div>
                <div class="swiper-outside testi-pagination">
                    <div class="testimonial-carousel">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide">
                                <div class="testi-item">
                                    <div class="quote-icon"><i class="las la-quote-right"></i></div>
                                    <p>Good to have transportation available in places and times it is otherwise hard to find, but the app has always been a bit difficult to use especially how it works or doesnt with large font phone settings.</p>
                                    <div class="testi-author">
                                        <div class="author-thumb"><img src="assets/img/comment-1.png" alt="author"></div>
                                        <div class="author-info">
                                            <h3>Eredrik Johanson <span>Financial .INC</span></h3>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="testi-item">
                                    <div class="quote-icon"><i class="las la-quote-right"></i></div>
                                    <p>Good to have transportation available in places and times it is otherwise hard to find, but the app has always been a bit difficult to use especially how it works or doesnt with large font phone settings.</p>
                                    <div class="testi-author">
                                        <div class="author-thumb"><img src="assets/img/comment-1.png" alt="author"></div>
                                        <div class="author-info">
                                            <h3>Eredrik Johanson <span>Financial .INC</span></h3>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="testi-item">
                                    <div class="quote-icon"><i class="las la-quote-right"></i></div>
                                    <p>Good to have transportation available in places and times it is otherwise hard to find, but the app has always been a bit difficult to use especially how it works or doesnt with large font phone settings.</p>
                                    <div class="testi-author">
                                        <div class="author-thumb"><img src="assets/img/comment-1.png" alt="author"></div>
                                        <div class="author-info">
                                            <h3>Eredrik Johanson <span>Financial .INC</span></h3>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="swiper-pagination"></div><!-- Carousel Dots -->
                </div>
            </div>
            <div class="col-lg-6">
                <div class="feature-wrap">
                    <div class="section-heading mb-30 wow fade-in-right" data-wow-delay="200ms">
                        <h4 class="white"><span></span>Why Choose Us!</h4>
                        <h2 class="white">Why Ride with Ridek?</h2>
                        <p class="white">We successfully cope with tasks of varying complexity, provide long-term
                            guarantees and regularly master technologies.</p>
                    </div>
                    <!--/.section-heading-->
                    <ul class="ridek-features">
                        <li class="wow fade-in-right" data-wow-delay="300ms">
                            <div class="feature-icon">
                                <i class="las la-gem"></i>
                            </div>
                            <div class="feature-content">
                                <h3>Safe Guarantee</h3>
                                <p>We successfully cope with tasks of <br> varying complexity!</p>
                            </div>
                        </li>
                        <li class="wow fade-in-right" data-wow-delay="400ms">
                            <div class="feature-icon">
                                <i class="las la-taxi"></i>
                            </div>
                            <div class="feature-content">
                                <h3>Fast Pickups</h3>
                                <p>We successfully cope with tasks of <br> varying complexity!</p>
                            </div>
                        </li>
                        <li class="wow fade-in-right" data-wow-delay="500ms">
                            <div class="feature-icon">
                                <i class="las la-tachometer-alt"></i>
                            </div>
                            <div class="feature-content">
                                <h3>Quick Ride</h3>
                                <p>We successfully cope with tasks of <br> varying complexity!</p>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>


<%-include('../pages/footer')%>

<%-include('../pages/scripts')%>

<script>
    document.addEventListener('DOMContentLoaded', (event) => {
        const today = new Date().toISOString().split('T')[0];
        const startDateInput = document.getElementById('startDate');
        const endDateInput = document.getElementById('endDate');
        const availabilityStartDateInput = document.getElementById('availabilityStartDate');
        const availabilityEndDateInput = document.getElementById('availabilityEndDate');

        startDateInput.setAttribute('min', today);
        endDateInput.setAttribute('min', today);
        availabilityStartDateInput.setAttribute('min', today);
        availabilityEndDateInput.setAttribute('min', today);

        startDateInput.addEventListener('change', function() {
            endDateInput.setAttribute('min', this.value);
        });

        availabilityStartDateInput.addEventListener('change', function() {
            availabilityEndDateInput.setAttribute('min', this.value);
        });

        endDateInput.addEventListener('change', function() {
            if (new Date(this.value) <= new Date(startDateInput.value)) {
                alert('End date must be greater than start date');
                this.value = '';
            }
        });

        availabilityEndDateInput.addEventListener('change', function() {
            if (new Date(this.value) <= new Date(availabilityStartDateInput.value)) {
                alert('End date must be greater than start date');
                this.value = '';
            }
        });
    });

    document.getElementById('filterForm').addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent form from submitting normally

        // Get the values of the form fields
        let carType = document.getElementById('carTypeSelect').value;
        let startDate = document.getElementById('startDate').value;
        let endDate = document.getElementById('endDate').value;

        // Check if all fields are filled
        if (!carType || !startDate || !endDate) {
            alert('Please fill out all fields.');
            return; // Stop execution if fields are not filled
        }

        // If all fields are filled, perform the search
        submitFilter();
    });


    function bookDrivers() {
        fetch("/bookDrivers")
            .then(res => res.json())
            .then(res => {
                let cards = '';
                if (res.error === false) {
                    let data = res.records;
                    console.log(data)

                    if (data.length > 0) {
                        data.forEach(driver => {
                            cards += `

        <div class="col-md-4 mb-3 padding-20 ">
            <div class="pricing-item">
                <div class="pricing-head-wrap">
                    <div class="pricing-car abc">
                        <img src="/${driver.photo}" alt="${driver.name}">

                    </div>
                </div>

                <ul class="pricing-list">
                    <li>Number of Seater: <span>${driver.seater}</span></li>
                    <li>Rent with Driver: <span>${driver.rentWithDriver}</span></li>
                    <li>Rent Without Driver: <span>${driver.rentWithoutDriver}</span></li>
                    <li>Fuel Type: <span>${driver.fuelType}</span></li>
                    <li><button type="button" class="default-btn" onclick="viewAvailability(${driver.user_id})">Check Avaliability</button></li>
                </ul>
            </div>
        </div>

    `;
                        });

                    }
                }
                else {
                    cards = `<div class="alert alert-danger">No data found</div>`;
                }
                document.getElementById("dataResult").innerHTML = cards;

            })
            .catch(e => console.log(e));
    }

    function submitFilter() {
        let carType = document.getElementById('carTypeSelect').value;
        let startDate = document.getElementById('startDate').value;
        let endDate = document.getElementById('endDate').value;
        console.log(startDate)

        let fd = new FormData();
        fd.append("carType", carType);
        fd.append("startDate", startDate);
        fd.append("endDate", endDate);

        fetch("/bookTaxi1", {
            method: "POST",
            body: fd
        }).then(res => res.json())
            .then(res => {
                console.log(res)
                let cards = '';
                if (res.error === false) {
                    let data = res.records;
                    console.log(data)

                    if (data.length > 0) {
                        data.forEach(driver => {
                            cards += `
                                <div class="col-md-4 mb-3 padding-20 ">
            <div class="pricing-item">
                <div class="pricing-head-wrap">
                    <div class="pricing-car abc">
                        <img src="/${driver.photo}" alt="${driver.name}">

                    </div>
                </div>

                <ul class="pricing-list">
                    <li>Number of Seater: <span>${driver.seater}</span></li>
                    <li>Rent with Driver: <span>${driver.rentWithDriver}</span></li>
                    <li>Rent Without Driver: <span>${driver.rentWithoutDriver}</span></li>
                    <li>Fuel Type: <span>${driver.fuelType}</span></li>
                    <li><button type="button" class="default-btn" onclick="bookTaxi1(${driver.user_id})"">Book Taxi</button></li>
                </ul>
            </div>
        </div>`;
                        });

                    }
                }
                else if(res.error === true ) {
                    cards = `<div class="alert alert-danger">No data found</div>`;
                }
                document.getElementById("dataResult").innerHTML = cards;


            })
            .catch(e => console.log(e));
    }


    function viewAvailability(driverId) {
        document.getElementById('driverId').value = driverId;
        document.getElementById("bookTaxi_button").disabled = true;
        $('#availabilityModal').modal('show');
    }

    function checkAvailability() {
        let driverId = document.getElementById('driverId').value;
        let availabilityStartDate = document.getElementById('availabilityStartDate').value;
        let availabilityEndDate = document.getElementById('availabilityEndDate').value;

        let fd = new FormData();
        fd.append("driverId", driverId);
        fd.append("availabilityStartDate", availabilityStartDate);
        fd.append("availabilityEndDate", availabilityEndDate);

        fetch(`/check_availability`, {
            method: "POST",
            body: fd
        })
            .then(res => res.json())
            .then(res => {
                if (!res.error) {
                    Swal.fire(
                        'Available!',
                        'The driver is available for the selected dates.',
                        'success'
                    ).then(() => {
                        document.getElementById("bookTaxi_button").disabled = false;
                    });
                } else {
                    Swal.fire(
                        'Unavailable',
                        'The driver is not available for the selected dates.',
                        'error'
                    );
                }
            })
            .catch(e => console.log(e));
    }

    function bookTaxi1(driverId) {
        console.log(driverId)
        let startDate = document.getElementById('startDate').value;
        let endDate = document.getElementById('endDate').value;
        console.log(endDate)

        fetch(`/information/${driverId}`, {
            method: "POST"
        })
            .then(res => res.json())
            .then(res => {
                if (!res.error) {
                    //console.log(res)
                    let data = res.rows[0];
                    let data2 = res.records2[0]
                    console.log(data)
                    console.log(data2)

                    document.getElementById('bookingStartDate').value = startDate;
                    document.getElementById('bookingEndDate').value = endDate;
                    document.getElementById('userEmail').value = data2.email;
                    document.getElementById('userName').value = data2.firstname + ' ' + data2.lastname;
                    document.getElementById('mobile').value = data2.phonenumber;
                    document.getElementById('withDriverPrice').value = data.rentWithDriver;
                    document.getElementById('withoutDriverPrice').value = data.rentWithoutDriver;
                    document.getElementById('carId').value = data.user_id;
                    document.getElementById('carName').value = data.name;


                    $('#bookingModal').modal('show');

                }
            });

    }

    function Reset(){
        document.getElementById('filterForm').reset()
        bookDrivers()

    }

    function bookTaxi2(){
        let driverId = document.getElementById('driverId').value
        let startDate = document.getElementById('availabilityStartDate').value;
        let endDate = document.getElementById('availabilityEndDate').value;

        console.log(startDate)
        console.log(endDate)


        fetch(`/information/${driverId}`, {
            method: "POST"
        })
            .then(res => res.json())
            .then(res => {
                if (!res.error) {
                    //console.log(res)
                    let data = res.rows[0];
                    let data2 = res.records2[0]
                    console.log(data)
                    console.log(data2)

                    console.log(data.rentWithDriver)

                    document.getElementById('bookingStartDate').value = startDate;
                    document.getElementById('bookingEndDate').value = endDate;
                    document.getElementById('userEmail').value = data2.email;
                    document.getElementById('userName').value = data2.firstname +' ' + data2.lastname;
                    document.getElementById('mobile').value = data2.phonenumber;
                    document.getElementById('withDriverPrice').value = data.rentWithDriver;
                    document.getElementById('withoutDriverPrice').value = data.rentWithoutDriver;
                    document.getElementById('carId').value = data.user_id;
                    document.getElementById('carName').value = data.name;


                    $('#availabilityModal').modal('hide');
                    document.getElementById('availabilityForm').reset()

                    $('#bookingModal').modal('show');

                }
            });

    }

    function confirmBooking() {
        // let driverId = document.getElementById('driverId').value
        let startDate = document.getElementById('bookingStartDate').value;
        let endDate = document.getElementById('bookingEndDate').value;

        let userEmail = document.getElementById('userEmail').value;
        let userName = document.getElementById('userName').value;
        let withDriverPrice = document.getElementById('withDriverPrice').value;
        let withoutDriverPrice = document.getElementById('withoutDriverPrice').value;
        let selectedRadio = document.querySelector('input[name="bookingOption"]:checked');

        console.log(selectedRadio.value)
        console.log(startDate)
        console.log(endDate)


        let start = new Date(startDate);
        let end = new Date(endDate);

        // Calculate the number of days between the start and end dates
        let timeDiff = end.getTime() - start.getTime();
        let daysDiff = timeDiff / (1000 * 60 * 60 * 24);

        console.log(daysDiff)

        // let daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));


        if (isNaN(daysDiff) || daysDiff <= 0) {
            alert('Please enter a valid date range.');
            return;
        }

        if (!selectedRadio) {
            alert('Please select a booking option.');
            return;
        }

        let totalPrice;
        if (selectedRadio.value === 'withDriver') {
            totalPrice = daysDiff * withDriverPrice;
        } else {
            totalPrice = daysDiff * withoutDriverPrice;
        }

        console.log(totalPrice)
        let options = {
            key: "rzp_test_dRWiKHS7zr2Gki",
            amount: totalPrice * 100,
            name: "Cab Booking",
            description: "Payment Gateway",
            image:
                "https://cdn3.vectorstock.com/i/1000x1000/98/22/logo-for-grocery-store-vector-21609822.jpg",
            handler: function (response) {
                RazorPayResponse(response);
            },
            prefill: {
                name: "",
                email: "",
            },
            notes: {
                address: "",
            },
            theme: {
                color: "#942436",
            },
        };

        var rzp1 = new Razorpay(options);
        rzp1.open();
    }

    const RazorPayResponse = (response) => {
        //console.log(response.razorpay_payment_id);
        console.log(response.razorpay_payment_id)
        if (response.razorpay_payment_id !== "") {
            alert("Payment Successful");
            let startDate = document.getElementById('bookingStartDate').value;
            let endDate = document.getElementById('bookingEndDate').value;

            let userEmail = document.getElementById('userEmail').value;
            let userName = document.getElementById('userName').value;
            let mobile = document.getElementById('mobile').value;
            let withDriverPrice = document.getElementById('withDriverPrice').value;
            let withoutDriverPrice = document.getElementById('withoutDriverPrice').value;
            let selectedRadio = document.querySelector('input[name="bookingOption"]:checked');
            let carId = document.getElementById('carId').value;
            let payment_id = response.razorpay_payment_id;
            console.log(payment_id)

            let carName = document.getElementById('carName').value;


            let start = new Date(startDate);
            let end = new Date(endDate);

            // Calculate the number of days between the start and end dates
            let timeDiff = end.getTime() - start.getTime();
            let daysDiff = timeDiff / (1000 * 60 * 60 * 24);
            console.log(daysDiff)
            let totalPrice;
            if (selectedRadio.value === 'withDriver') {
                totalPrice = daysDiff * withDriverPrice;
            } else {
                totalPrice = daysDiff * withoutDriverPrice;
            }

            let fd = new FormData();

            fd.append("carId", carId)
            fd.append("payment_id", payment_id)
            fd.append("startDate", startDate)
            fd.append("endDate", endDate)
            fd.append("totalPrice", totalPrice)
            fd.append("daysDiff", daysDiff)
            fd.append("selectedRadio", selectedRadio.value)
            fd.append("mobile", mobile)
            fd.append("userEmail", userEmail)
            fd.append("userName", userName)
            fd.append("carName", carName)

            fetch("/booking",{
                method: "POST",
                body: fd
            }).then(res=>res.json())
                .then(res=>{
                    if (res.error) {
                        swal.fire({
                            icon: "error",
                            title: res.message,
                        }); }
                    else {

                        swal.fire({
                            icon: "success",
                            title: res.message,
                            timer: 1500


                        });
                        $('#bookingModal').modal('hide');
                        Reset()

                    }
                })

        }
        else {
            alert("Payment Failed");
        }
    }

    function Reset2(){
        document.getElementById('availabilityForm').reset()
    }


</script>

</body>
</html>